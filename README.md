
## **ğŸ“Œ ê°œìš”**

- **í”„ë¡œì íŠ¸ ëª…ì¹­:** REMOVIE
- **ê°œë°œ ì¸ì›:** 1ëª…
- **ê°œë°œ ê¸°ê°„:** 2024.09 - 2025.01

## **ğŸ“Œ ì„¤ëª…**

RemovieëŠ” **ì¬ê°œë´‰ ì˜í™” ì•Œë¦¼ ì„œë¹„ìŠ¤** ì…ë‹ˆë‹¤.

- ê¸°ì¡´ ì˜í™”ê´€ì—ì„œ ë‹¤ì‹œ ë³´ê³  ì‹¶ì€ ì˜í™”ê°€ **ì¬ê°œë´‰í•˜ë©´ í‘¸ì‹œ ì•Œë¦¼**ì„ ë°›ì„ ìˆ˜ ìˆìŒ
- **ì¬ê°œë´‰ ì˜í™” ë¦¬ìŠ¤íŠ¸**ì™€ **ìµœì‹  ê°œë´‰ ì˜í™” ìˆœìœ„** í™•ì¸ ê°€ëŠ¥

## **ğŸ“Œ íŠ¹ì§•**

- **í‰ê·  30ê°œ ë°ì´í„° â†’ ì•½ 250ê°œ ìµœì‹ í™”** ê°€ëŠ¥
- **ë¶„ë¦¬ëœ ì„œë²„ë¡œ ì•ˆì •ì ì¸ ìš´ì˜** ê°€ëŠ¥
- **ëª¨ë“  ì˜í™”ì‚¬ì— ì˜ˆë§¤ìœ¨ì„ ë°”íƒ•ìœ¼ë¡œ ìˆœìœ„** ì œê³µ
- **ë¯¼ê°í•œ íŒŒì‹± ì‹œìŠ¤í…œì—ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°ì´í„°** ì œê³µ

## **ğŸ“Œ ì°¸ê³  ì‚¬í•­**
- **REMOVIEëŠ” KOBIS(ì˜í™”ê´€ì…ì¥í†µí•©ì „ì‚°ë§) ìŠ¤í¬ë˜í•‘ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤**
- **ë”°ë¼ì„œ ë°ì´í„° ì´ìš©ì— ì‚¬ì „ í—ˆë½ì„ êµ¬í•˜ì˜€ìŠµë‹ˆë‹¤**
- **ê³µê°œ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ KOBIS ê´€ë ¨ ë¯¼ê°í•œ ì½”ë“œ ë¸”ë¡ ì²˜ë¦¬ í•˜ì˜€ìŠµë‹ˆë‹¤**
- **ëª¨ë“  ì—”í‹°í‹°ì— í…Œì´ë¸” ë§¤í•‘ ì •ë³´ë¥¼ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤**
# ë°±ì—”ë“œ ì„œë²„

## **âœ… ì£¼ìš” ê¸°ëŠ¥**

1. API í†µì‹ 
2. í´ë¼ì´ì–¸íŠ¸ ë²„ì „ ë™ê¸°í™”
3. ë­í‚¹ ë™ê¸°í™” ë° ìµœì í™”
4. ì¬ê°œë´‰ ì˜í™” FCM

## **âš™ï¸ ê°œë°œ í™˜ê²½**

#### **ê°œë°œ ì–¸ì–´**

- Java 21

#### **í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬**

- Spring Boot 3.3
- Spring JPA
- Spring Security
- Redis 

#### **ë°ì´í„°ë² ì´ìŠ¤**

- MySQL

#### **ë°°í¬ í™˜ê²½**

- AWS EC2
- AWS ECR
- GitHubAction
- Docker

#### **ì•Œë¦¼ & ì™¸ë¶€ ì„œë¹„ìŠ¤**

- Firebase FCM (í‘¸ì‹œ ì•Œë¦¼)

#### **ê°œë°œ ë„êµ¬**

- IntelliJ IDEA
- Gradle

## API ì—”ë“œ í¬ì¸íŠ¸

| HTTP Method | ì—”ë“œí¬ì¸íŠ¸                          | ìš”ì²­ íŒŒë¼ë¯¸í„°                                         | ì„¤ëª…                           |
| ----------- | ------------------------------ | ----------------------------------------------- | ---------------------------- |
| **GET**     | `/release/info`                | ì—†ìŒ                                              | ìµœì‹  ê°œë´‰ ìƒíƒœë¥¼ ë¶ˆëŸ¬ ì˜µë‹ˆë‹¤.            |
| **GET**     | `/cinema/{movieCode}`          | `movieCode` (PathVariable)                      | ëŒ€ìƒ ì˜í™”ì— ìƒì˜ê´€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.       |
| **GET**     | `/movie/info/sync`             | `version` (RequestParam)                        | ë²„ì „ì— ë”°ë¥¸ ë™ê¸°í™”ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ ì˜µë‹ˆë‹¤. |
| **GET**     | `/movie/info`                  | `movieCode` (RequestParam, List)                | ì˜í™”ì— ì •ë³´ë“¤ì„ ë¶ˆëŸ¬ ì˜µë‹ˆë‹¤.             |
| **GET**     | `/movie/info/page`             | `offset` (RequestParam), `limit` (RequestParam) | ë­í‚¹ êµ¬ê°„ì— ì˜í™” ì •ë³´ë“¤ì„ ë¶ˆëŸ¬ ì˜µë‹ˆë‹¤.       |
| **GET**     | `/movie/info/date/{movieCode}` | `movieCode` (PathVariable)                      | ëŒ€ìƒ ì˜í™”ì— ìƒì˜ ë‚ ì§œë¥¼ ë¶ˆëŸ¬ ì˜µë‹ˆë‹¤.        |
| **POST**    | `/update`                      | ì—†ìŒ                                              | ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±° í¬ì¸íŠ¸ ì…ë‹ˆë‹¤.            |




# ì½”ì–´ ì„œë²„


## **âœ… ì£¼ìš” ê¸°ëŠ¥**

1. ì˜í™” ë°ì´í„° íŒŒì‹±
2. DB ì“°ê¸° ì‘ì—…
3. Redis ì“°ê¸° ì‘ì—…

## **âš™ï¸ ê°œë°œ í™˜ê²½**

#### **ê°œë°œ ì–¸ì–´**

- Java 21

#### **í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬**

- Spring Boot 3.3
- Spring JPA 
- Redis

#### **ë°ì´í„°ë² ì´ìŠ¤**

- MySQL 

#### **ì¸í”„ë¼ & ë°°í¬ í™˜ê²½**

- AWS EC2
- AWS ECR
- GitHubAction
- Docker

#### **ê°œë°œ ë„êµ¬**

- IntelliJ IDEA
- Gradle

## **í”„ë¡œì„¸ìŠ¤**

- **í”„ë¡œì„¸ìŠ¤ëŠ” 4ê°€ì§€ë¡œ êµ¬ì„±ë¨**
  - ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤
  - ë¹„êµ í”„ë¡œì„¸ìŠ¤
  - íŒŒì‹± í”„ë¡œì„¸ìŠ¤
  - ìƒì˜ê´€ í”„ë¡œì„¸ìŠ¤
- **í”„ë¡œì„¸ìŠ¤ëŠ” ê°ê° ë…ë¦½ì ìœ¼ë¡œ êµ¬ì„±ë¨** -> ê° í”„ë¡œì„¸ìŠ¤ì— ë³€ê²½ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•œ ì„ íƒ
- **ê° í”„ë¡œì„¸ìŠ¤ì— ë¦¬í„´ ê°’ì€ ë³€ê²½ì— ë¯¼ê°í•˜ì§€ ì•Šì€ ê°’ìœ¼ë¡œ êµ¬ì„± ë¨**



```mermaid
sequenceDiagram
participant ë°±ì—”ë“œ
UpdateService ->> ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤: í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤ ->> ë¹„êµ í”„ë¡œì„¸ìŠ¤: í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
ë¹„êµ í”„ë¡œì„¸ìŠ¤ ->> íŒŒì‹± í”„ë¡œì„¸ìŠ¤: í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
íŒŒì‹± í”„ë¡œì„¸ìŠ¤ ->> ë¹„êµ í”„ë¡œì„¸ìŠ¤: íŒŒì‹± í›„ ê°€ê³µëœ ë°ì´í„°
ë¹„êµ í”„ë¡œì„¸ìŠ¤ ->> ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤: ë°ì´í„° ë¦¬í„´
ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤ ->> UpdateService: ëª…ë ¹ ë¦¬í„´ 
UpdateService ->> JPA: ëª…ë ¹ ìˆ˜í–‰(DB ì‘ì—…)
note over JPA : íŠ¸ë™ì­ì…˜
UpdateService ->> ë°±ì—”ë“œ: ë™ê¸°í™” ë©”ì‹œì§€
ë°±ì—”ë“œ ->> UpdateService: 203
```



# ì»¤ë§¨ë“œ í”„ë¡œì„¸ìŠ¤

**ëª©ì **

- íŒŒì‹±ëœ ìµœì¢… ë°ì´í„°ë¥¼ ëª¨ì•„ JPA íŠ¸ëœì­ì…˜ì„ ì½œ ì²´ì¸ì˜ ìµœìƒë‹¨ìœ¼ë¡œ ìœ ì§€

**ğŸ“Œ `CommandFactory`**

- **ì»¤ë§¨ë“œë¥¼ ìƒì„±í•˜ëŠ” ê°ì²´**
- `NewMovieCommandFactory`, `RetireMovieCommandFactory` ë“± ì¡´ì¬
- ë¹„êµ í”„ë¡œì„¸ìŠ¤ë¡œ ë¶€í„° ëª…ë ¹ ìˆ˜í–‰ì— ì£¼ì²´ê°€ ë˜ëŠ” ê°’ ë¶ˆëŸ¬ì˜´
- ëª…ë ¹ì„ ìˆ˜í–‰í•˜ëŠ”ë° í•„ìš”í•œ DI ì£¼ì…


```mermaid
sequenceDiagram
UpdateService ->> CommandManagerFactory : í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
CommandManagerFactory ->> CommandFactory : ëª…ë ¹ ìƒì„± 
CommandFactory ->> ë¹„êµ í”„ë¡œì„¸ìŠ¤ : í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
ë¹„êµ í”„ë¡œì„¸ìŠ¤ ->> CommandFactory :íŒŒì‹± í›„ ê°€ê³µëœ ë°ì´í„°
CommandFactory ->> CommandManagerFactory : ëª…ë ¹ ë¦¬í„´
CommandManagerFactory ->> UpdateService : ëª…ë ¹ ë¦¬í„´
```



# ë¹„êµ & íŒŒì‹± í”„ë¡œì„¸ìŠ¤

- **ëª¨ë“  `MovieCompare` ê°ì²´ëŠ” `MovieService`ë¥¼ í†µí•´ í†µì‹  ë¨** -> ë³€ê²½ì— ëŒ€í•œ ì „íŒŒë¥¼ ì°¨ë‹¨í•˜ê¸° ìœ„í•¨.

- **NewMovieCompare ì€ ì¶”ê°€ì ì¸ íŒŒì‹± ê³¼ì • í¬í•¨** -> ì‹ ê·œ ì˜í™”ì— ëŒ€í•œ íŒŒì‹± ì‘ì—….


```mermaid
sequenceDiagram
NewMovieCommandFactory ->> NewMovieCompareService: í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ 
NewMovieCompareService ->> NewMovieCompare: ì‹ ê·œ ê°œë´‰ ìƒíƒœ, ê¸°ì¡´ ê°œë´‰ ìƒíƒœ
NewMovieCompare ->> íŒŒì‹± í”„ë¡œì„¸ìŠ¤: ì‹ ê·œ ì˜í™”ì— ëŒ€í•´ì„œë§Œ ë°ì´í„° íŒŒì‹±
íŒŒì‹± í”„ë¡œì„¸ìŠ¤ ->> NewMovieCompare: ê°€ê³µ í›„ ë¦¬í„´
NewMovieCompare ->> NewMovieCompareService: ìƒˆë¡œìš´ ì˜í™”ì— ëŒ€í•œ ë°ì´í„° ë¦¬í„´
NewMovieCompareService ->> NewMovieCommandFactory: ìƒˆë¡œìš´ ì˜í™”ì— ëŒ€í•œ ë°ì´í„° ë¦¬í„´
```


# ìƒì˜ê´€ í”„ë¡œì„¸ìŠ¤

### **ğŸ“Œ Redis ì‚¬ìš© ì´ìœ **

1. **í•˜ë£¨ ë‹¨ìœ„ë¡œ ìœ ì§€í•˜ëŠ” ë°ì´í„° íŠ¹ì„±**
    
    - ì§€ì†ì ì¸ ìˆ˜ì • ì‘ì—… ë°œìƒ â†’ **DB ì˜¤ë²„í—¤ë“œ ì¦ê°€ ë°©ì§€**
    - **ì½”ì–´ ì„œë²„ & ë°±ì—”ë“œ ì„œë²„ê°€ DBë¥¼ ê³µìœ ** â†’ ì¶©ëŒ ë°©ì§€
2. **í´ë¼ì´ì–¸íŠ¸ ìºì‹± ë¯¸ì§€ì›**
    
    - ìƒì˜ê´€ ë°ì´í„°ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìºì‹œë˜ì§€ ì•ŠìŒ
    - **Redis ì‚¬ìš©ìœ¼ë¡œ ë¹ ë¥¸ ì¡°íšŒ ê°€ëŠ¥**


```mermaid
sequenceDiagram
UpdateService ->> CinemaUpdateService: í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
CinemaUpdateService ->> CinemaService: íŒŒì‹± í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
CinemaService ->> CinemaDataService: íŒŒì‹± í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
CinemaDataService ->> CinemaService: íŒŒì‹± í›„ ì˜í™”ê´€ ë°ì´í„° ë¦¬í„´
CinemaService ->> CinemaUpdateService: ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ë°ì´í„° ë¦¬í„´
CinemaUpdateService ->> CinemaRedisService: List<CinemaEntity>
CinemaRedisService ->> Redis: save
```

CinemaUpdateServiceì—ì„œ ì§ì ‘ì ìœ¼ë¡œ íŒŒì‹±ì´ ì´ë£¨ì–´ ì§€ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.

